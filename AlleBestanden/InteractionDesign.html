<html>
    <h1>Interaction design</h1>
    <p>Voor de interaction design zijn schetsen gemaakt van de verschillende webpagina's waarmee de gebruikers gaan interacteren.</p>
    <b>Name:</b>
        <a>Login</a> <br>
    <b>Requirements:</b> 
        <a></a> <br>
    <b>Use cases:</b>        
        <a></a> <br>
    <a>Login pagina en tevens de landingspagina voor gebruikers.<br>
    De Login pagina heeft een navigatiebar op de top van de webpagina, gebruikers kunnen op de links klikken om de andere pagina's te bezoeken.<br>
    De gebruiker kan zijn/haar email en wachtwoord invullen.<br>
    Er is een knop "wachtwoord vergeten?", deze brengt de gebruiker naar de wachtwoordopvraag tool.<br>
    Er is een Registratie knop voor nieuwe gebruikers, deze linkt door naar de registratie pagina.  
    De "LogIn" knop voert de login actie uit, indien succesvol verwijst deze door naar de pagina voor het zoeken van ritten.<br>
    Indien de Log in actie mislukt geeft het systeem "uw emailadres of wachtwoord is niet bij CarPool4Uni bekend."</a> <br>
    <a href="websiteondwerp/Login.html">Klik hier voor een voorbeeld van de Log in Pagina.</a>
    
     <p></p><b>Name:</b>
        <a>Registratie</a> <br>
    <b>Requirements:</b> 
        <a>5</a> <br>
    <b>Use cases:</b>        
        <a>5</a> <br>
    <a>De registratie pagina is voor nieuwe gebruikers van CarPool4Uni.<br>
    De Registratie pagina heeft een navigatiebar op de top van de webpagina, gebruikers kunnen op de links klikken om de andere pagina's te bezoeken.<br>
    De gebruiker moet de volgende gegevens invullen: voornaam(en), achternaam, student/medewerkersnummer, telefoonnummer en het rijbewijsregistratienummer<br>
    De pagina geeft weer waar de gebruikers hun rijbewijsregistratienummer vinden en waarom deze nodig is voor CarPool4Uni.<br>
    Er is een knop om de registratie te voltooien, deze slaat de ingevulde gegevens op en voert de rijbewijs check uit usecase 5 uit.<br>
    Indien een van de velden verkeerd is ingevoerd geeft deze pagina een error en de gebruiker de kans om de gegevens nog een keer in te vullen.<br>
    </a>
    <a href="websiteondwerp/Regi.html">Klik hier voor een voorbeeld van de Registratie Pagina.</a>
    
    <p></p><b>Name:</b>
        <a>Zoek ritten Pagina</a> <br>
    <b>Requirements:</b> 
        <a>4 & 7</a> <br>
    <b>Use cases:</b>        
        <a>7</a> <br>
    <a>De pagina heeft een navigatiebar op de top van webpagina, gebruikers kunnen op de links klikken om de andere pagina's te bezoeken.<br> 
    Om te zoeken naar ritten moet een gebruiker de volgende velden invullen, vertreklocatie, bestemming, tijdstip van vertrek en op welke dag de rit moet plaatsvinden.<br>
    Ook kan de gebruikers voorkeuren aangeven door middel van vinkjes, deze zijn echter niet verplicht om in te vullen. <br>
    Als alle gegevens zijn ingevuld is het mogelijk om op de "Zoek Rit" knop te drukken, indien één van de velden verkeerd is ingevuld geeft de pagina een foutmelding met de aard van de error.<br>
    Boven het formulier is er een link om door te klikken naar het aanbieden van ritten, gebruikers kunnen eenvoudig tussen de twee pagina's wisselen, ook is het verschil duidelijk aangegeven.<br></a>
    <a href="websiteondwerp/Home.html">Klik hier voor een voorbeeld van de "Zoek ritten" Pagina.</a>
     
    <p></p><b>Name:</b>
        <a>Gevonden ritten pagina</a> <br>
    <b>Requirements:</b> 
        <a> 3 & 7</a> <br>
    <b>Use cases:</b>        
        <a>3 & 7 </a> <br>
    <a>De pagina heeft een navigatiebar op de top van webpagina, gebruikers kunnen op de links klikken om de andere pagina's te bezoeken.<br> 
    De pagina heeft een terug knop, zo kan de gebruiker terug naar de zoekopdracht en eventueel veranderingen aanbregen.<br>
    De pagina herhaalt de in de zoekopdracht ingevoerde gegevens, in de vorm van "Er zijn 'X aantal' ritten beschikbaar met uw geselecteerde voorkeuren rond 'gebruikers tijd' richting 'locatie'."<br>
    Elke beschikbare rit krijgt een eigen regel met de naam van de aanbieder en aan de rechter kant een knop om de bestuurder van die rit te berichten. <br>
    Er verschijnt een kaartje met een overzicht van de route opgehaald van Google Maps, ook geeft deze weer hoe lang de rit ongeveer zal duren. <br>
    </a>
    <a href="websiteondwerp/GevondenRitten.html">Klik hier voor een voorbeeld van de "Gevonden ritten" Pagina.</a>
    
    
    <p></p><b>Name:</b>
        <a>Chat Interface</a> <br>
    <b>Requirements:</b> 
        <a>3</a> <br>
    <b>Use cases:</b>        
        <a>3</a> <br>
    <a>De pagina heeft een navigatiebar op de top van webpagina, gebruikers kunnen op denlinks klikken om de andere pagina's te bezoeken.<br>
    De pagina heeft een 'Terug' knop, deze knop brengt gebruikers terug naar de 'Gevonden ritten' pagina.<br>
    In de middenbox wordt de volgende zin weergeven, "Chat met 'Naam ontvanger', dit maakt voor de gebruiker duidelijk met wie de gebruiker chat.<br>
    De pagina weergeeft een chat, de verzender aan de rechter kant ontvanger links, voor elke gebruiker zijn de eigen berichten donkerder.<br>
    Bij elk chatbericht wordt de tijd van verzenden en de profielfoto van de gebruiker die het bericht verzend weergeven. <br>
    Er is een input box onderaan de chat om berichten te typen/bewerken, deze kunnen vervolgens worden verzonden doormiddel van een verzend knop. <br></a>
    <a href="websiteondwerp/chat.html">Klik hier voor een voorbeeld van de chat interface.</a>
    
    <p></p><b>Name:</b>
        <a>Rating interface</a> <br>
    <b>Requirements:</b> 
        <a>9 & 5</a> <br>
    <b>Use cases:</b>        
        <a>9</a> <br>
    <a>De pagina heeft een navigatiebar op de top van webpagina, gebruikers kunnen op de links klikken om de andere pagina's te bezoeken.<br>
    De interface komt niet na elke rit omhoog,  de bedoeling is dat 30% van de gemaakte ritten beoordeeld wordt. het is voor gebruikers niet mogelijk om deze beoordeling over te slaan. <br>
    De rit wordt beoordeeld doormiddel van een schaal met 5 sterren. <br>
    Gebruikers kunnen ook eventuele opmerkingen in het veld onder de sterren toevoegen, indien een gebruiker  een beoordeling van 1 ster inlevert is dit veld verplicht.<br>
    Indien er geen sterren worden gegeven, of geen opmerking bij een beoordeling van 1 ster is het niet mogelijk voor de gebruiker om door te klikken.<br>
    Onder de pagina staat de knop verzenden, als de beoordeling correct is ingevuld neemt deze de gebruiker naar ofwel zoek ritten ofwel aanbieden van ritten (dat hangt af van waar de gebruiker naar toe navigeerde.<br>
    </a>
    <a href="websiteondwerp/Beoordeling.html">Klik hier voor een voorbeeld van de rating interface.</a>
    
    <p></p><b>Name:</b>
        <a>Rit aanbieden</a> <br>
    <b>Requirements: </b> 
        <a> 4 </a> <br>
    <b>Use cases:</b>        
        <a>4</a> <br>
    <a>De pagina heeft een navigatiebar op de top van webpagina, gebruikers kunnen op de links klikken om de andere pagina's te bezoeken.<br>
    De pagina geeft duidelijk weer dat het gaat om het aanbieden van ritten, de in te voeren gegevens staat een link om naar de pagina voor het zoeken van ritten te navigeren. <br>
    Vervolgens moet de gebruikers de volgende gegevens invoeren: bestemming, vertrekadres, het aantal plaatsen beschikbaar (dit moet een nummer zijn), regels van de bestuurder, tijdstip en op welke dag de rit aangeboden wordt.<br>
    Onderaan de pagina, rechts van het formulier is er een "Plaats rit" knop,  nadat er op deze knop is gedrukt staat de rit in het systeem en is het mogelijk voor andere gebruikers om de rit te vinden en in te schrijven.<br>
    Indien er een veld niet is ingevuld, alles is verplicht,  geeft de knop een foutmelding. <br>
    </a>
    <a href="websiteondwerp/RitAanbieden.html">Klik hier voor een voorbeeld van de "Rit aanbieden" pagina.</a></html>
    
    <h1>SQL queries</h1>
    <p>Om de gegevens te verkijgen uit de database is het nodig om gebruik te maken van SQL, er moeten verschillende bewerkingen/zoekfuncties worden uitgevoerd op de database. Er wordt uitgegaan van het Database ontwerp in het hoofdstuk: <a href="database_design.html">"Database design"</a>.<br>
    De gebruikers kunnen verschillende bewerkingen uitvoeren, alleen de belangrijkste van deze bewerkingen worden hier behandeld, deze functies zijn:<br>
    - Registatie<br>
    
    - Rit plaatsen <br>
    - Rit zoeken<br> </p>
    
    <p>Allereerst moeten de tabbelen worden gemaakt, met de relevante gegevens, uit het stuk over database design komt voort dat de gebruikers tabel de volgende gegevens moet opslaan: Voornaam, Achternaam, emailadres, studentmedewerkersnummer, rijbewijsregistratienummer, telefoonnummer en het wachtwoord.
    De gebruikers tabel wordt als volgt opgesteld. <br>
    <b>CREATE TABLE </b>gebruikers<br>
( <br>
    Voornaam varchar(255), <br>
    Achternaam varchar(255), <br>
    Emailadres varchar(255), <br>
    StudentMedewerkersNummer int(255), <br>
    TelefoonNummer int(255), <br>
    WachtWoord varchar(255)
   
);
    
    </p>
    
    Op de registratie pagina worden de volgende gegevens opgevraagd: Voornaam, Achternaam, emailadres, student/medewerkersnummer, rijbewijsregistratienummer, telefoonnummer en het wachtwoord.<br> Deze gebruiksgegevens worden opgeslagen in de database, ook kent de database een uniek User_id toe per registratie. 
    <br>De registratie Query werkt bijvoorbeeld als volgt: <br> </p>
    
    <b>BEGIN</b><br>
    <b>BEGIN TRY </b><br>
    
    
        <b>INSERT INTO</b> gebruiker
        (Voornaam, Achternaam, Emailadres, StudentMedewerkersNummer, TelefoonNummer, WachtWoord) <br>
        <b>VALUES</b> ('Koen','Vierling','koen@gmail.nl','4532635','+31625637703',HASHBYTES('SHA2_512', WachtWoord)); <br>
        
        <b>SET</b> OutPut='Registratie Succesvol!'
        <br>
        <b>END TRY</b>
        <br>
        <b>BEGIN CATCH <BR>
        SET</b> OutPut = 'Error, één of meer gegevens zijn niet correct ingevoerd' <br>
        <b>END</b>
      
      <p>Op deze manier worden de opgegeven gegevens van de gebruikers opgeslagen in de 'gebruiker' tabel. Merk op dat het rijbewijs registratie nummer niet in deze pagina wordt opgeslagen. Het is namelijk mogelijk om het platform te gebruken zonder minimimaal 1 jaar het rijbewijs te hebben (anders worden gebruikers zonder rijbewijs uitgesloten). Pas op het moment dat een gebruiker een rit wilt aanbieden worden deze gegevens opgevraagd, en gechecked bij het RDW. <br>
    Het wachtwoord van de gebruikers wordt ook in de tabel opgenomen en met SHA512 encryptie opgeslagen. Op deze manier is het niet meer mogelijk om vanuit de server side het origineele wachtwoord in te voeren.<br>
    De TRY en CATCH functies worden gebruikt om de gebruikers feedback te geven wanneer er iets fout gaat, bijvoorbeeld bij het invoeren van verkeerde gegevens.</p>
    
    <p><b>Rit plaatsen</b> <br>
    Om de ritten bij te houden worden deze ook opgeslagen in de database,  alleereerst moet deze tabel gemaakt worden. De code voor deze procedure wordt nu overgslagen. De tabel 'Rit' heeft de volgende kolommen: Bestemming, VertrekAdres, Plaatsen, PrefRoken, PrefHuisDier, ReisDag en TijdStip.  
    De Query voor het plaatsen van een rit werkt als volgt. </p>
    <b>BEGIN</b><br>
    UserIDChauf = UserID      #Gebruik UserID van de huidige Login # <br>
        <b>BEGIN TRY </b><br>
    
    
            <b>INSERT INTO</b> Rit
                (UserIdChauf, Bestemming, VertrekAdres, Plaatsen, PrefRoken, PrefHuidDier, ReisDag, TijdStip) <br>
            <b>VALUES</b> 
                ('45263','TPM, Delft','CS, Amsterdam',4,0, 1, '24-09-18', '14:00'); <br>
        
            <b>SET</b>
                OutPut='Rit plaatsen Succesvol!'<br>
        <b>END TRY</b><br>
        
        <b>BEGIN CATCH <BR>
            SET</b>
                OutPut = 'Error, één of meer gegevens zijn niet correct ingevoerd' <br>
        <b>END</b>
    
    <p> Deze procedure lijkt op de registratie van gebruikers, de procedure slaat ook op wie de rit aanbied door de ingeschreven user id in de tabel op te nemen. </p>
    
    <p><b>Zoeken van een Rit</b><br>
    Het zoeken van een rit is een meer complexe vraag aan de database. De zoekquerries geven uitkomsten die precies hetzelfde zijn als de opgevraagde gegevens.
    Echter is dit niet altijd in het voordeel van de gebruiker, zo is het bijvoorbeeld mogelijk dat een gebruiker het prima vind om een kwartiertje eerder of later ergens te zijn. 
    Hierom moeten de zoekquerries van het systeem uit breeder worden gedefineerd, deze opties worden weergeven en dan kan de gebruiker zelf met gezond verstand bepalen of deze uitkomst voor hem voordelig is. 
    <br>
    Voor het zoeken van een rit worden de volgende gegevens opgevraagd: bestemming, vertrek adres, preferenties, tijd en reisdag. </p>
    
    <b>SELECT</b> Bestemming, VertrekAdres, PrefRoken, PrefHuisdier, TijdStip, Gebruikers.Naam <br> 
    <b>FROM</b> Rit, Gebruikers <br>
    <b>WHERE</b> Bestemming <b>LIKE</b> '%TPM%' <b>AND LIKE</b>  '%TU Delft%' <i>#Zie notitie hieronder</i><br>  
    <b>AND</b> VertrekAdres <b>LIKE</b> '%Centraal Station%' <b>AND LIKE</b> '%Amsterdam%' <br>
    <b>AND</b> Plaatsen <b>IS NOT</b> 0 <br>
    <b>AND</b> Reisdag = "2018-11-08"<br>
    <b>AND</b> TijdStip <b>BETWEEN</b> (10:15) <b>AND</b> (10:45)
    <p>De zoekquerry weergeeft de volgende gegevens, Bestemming, Vertrekadres, de preferentie, de tijd van de rit en tot slot de naam van de aanbieder.
    De reisdag is bijvoorbeeld niet meer relevant, er is immers al gezocht op een bepaalde dag de gebruiker kan er van uitgaan dat alle ritten op de door hem aangegeven dag gebeuren. <br>
    Om te voorkomen dat de querry te nauwe marges neemt wordt er gebruik gemaakt van de 'LIKE' operator. De door de user opgegeven variabelen voor de zoekquerry moeten worden omgeschreven zodat de database er beter mee om kan gaan. Dit kan geimplementeerd worden met een JavaScript. <br>
    Tot slot moet de zoekquerry geen ritten weergeven zonder plaats over. <br>
    </p>
    <p># Voor deze adressen is de zoekquerry nog eenvoudig, maar wat als gebruikers bijvoorbeeld hun eigen adres invoeren? 
    Ideaal gezien kunnen gebruikers elk willekeurig adres invoeren voor zowel vertrek als bestemmingsadres. Alsnog moet de gebruiker dan ritten kunnen vinden, bij hem of haar in de buurt. Dit probleem kan bijvoorbeeld worden opgelost door gebruik te maken van een Google Maps API. <BR>
        Via deze service kunnen de coordinaten van de opgevraagde locaties worden achterhaald, vervolgens is het mogelijk om bijvoorbeeld alle ritten die in een radius van 500 meter zitten met hun coördinaten te weergeven. Omdat deze operatie complex is en ook niet gedaan kan worden met alleen SQL is ervoor gekozen om dit buiten beschouwing te laten.  </p>
    
    
    